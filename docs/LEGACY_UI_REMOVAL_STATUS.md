# Статус удаления Legacy UI и перехода на Live UI v2

**Дата начала:** 2024-12-19  
**Ветка:** `remove-legacy-ui-audit`  
**План:** [удаление_legacy_ui_и_переход_на_live_ui_v2_10972f02.plan.md](../.cursor/plans/удаление_legacy_ui_и_переход_на_live_ui_v2_10972f02.plan.md)

---

## Прогресс по этапам

### ✅ Этап 1: Аудит Legacy UI — ЗАВЕРШЁН

**Дата завершения:** 2024-12-19

**Выполнено:**
- ✅ Анализ функциональности `web/index.html` и `web/app.js`
- ✅ Анализ функциональности `web/analysis.html` и `web/analysis.js`
- ✅ Сравнение с функциональностью Live UI v2
- ✅ Выявление отсутствующих функций в Live UI v2
- ✅ Проверка всех упоминаний legacy UI в документации
- ✅ Проверка скриптов валидации на зависимости от legacy UI

**Результаты:**
- ✅ Все функции Legacy Live UI реализованы в Live UI v2
- ✅ Все критичные функции Legacy Analysis UI реализованы в Live UI v2
- ❌ Отсутствует только некритичная функция: отображение SQL запросов (низкая критичность)

**Документы:**
- Создан документ аудита: `docs/LEGACY_UI_AUDIT.md`

**Готовность к удалению:** ✅ **Готово** — все критичные функции реализованы в Live UI v2

---

### ⏳ Этап 2: Депрекация Legacy UI (документальная) — В ОЖИДАНИИ

**Статус:** Ожидает начала

**План действий:**
1. Обновить `docs/API.md`: удалить секции "Legacy UI" и "Analysis UI"
2. Обновить `docs/USER_GUIDE.md`: удалить упоминания legacy UI
3. Обновить `README.md`: убрать упоминания legacy UI
4. Обновить `DOCKER.md`: описать только Live UI v2
5. Обновить `Makefile`: изменить сообщения

---

### ⏳ Этап 3: Обновление скриптов валидации — В ОЖИДАНИИ

**Статус:** Ожидает начала

**План действий:**
1. Обновить `scripts/validate.sh`: удалить проверки legacy UI, добавить проверку Live UI v2
2. Обновить `scripts/validate_cursor_workflow.sh`: удалить упоминания `analysis.html`
3. Проверить другие скрипты на зависимости от legacy UI

---

### ⏳ Этап 4: Удаление отдачи UI из backend — В ОЖИДАНИИ

**Статус:** Ожидает начала

**План действий:**
1. Удалить функцию `findWebDir()` из `cmd/teltel/main.go:22-52`
2. Удалить код обслуживания статических файлов из `cmd/teltel/main.go:147-156`
3. Удалить логирование "Web UI: http://localhost:%d" из `cmd/teltel/main.go:179`
4. Обновить логирование: убрать упоминания Web UI

---

### ✅ Этап 5: Удаление web/ из Docker образа — ЗАВЕРШЁН

**Статус:** Завершён

**Выполнено:**
1. Удалена строка `COPY --from=builder /build/web /app/web` из `Dockerfile`
2. Обновлён `.dockerignore`: директория `web/` исключена из Docker-контекста

---

### ⏳ Этап 6: Обновление docker-compose (опционально) — В ОЖИДАНИИ

**Статус:** Ожидает начала

**План действий:**
1. Проверить `docker-compose.yml`: убедиться, что `live-ui` сервис правильно настроен
2. Проверить `VITE_WS_URL=ws://localhost:8081/ws` в `docker-compose.yml:53`
3. Убедиться, что зависимости между сервисами правильные
4. Обновить комментарии в `docker-compose.yml` (если нужно)

---

### ⏳ Этап 7: Удаление директории web/ — В ОЖИДАНИИ

**Статус:** Ожидает начала

**План действий:**
1. Удалить директорию `web/` из репозитория
2. Проверить, что нет других зависимостей от `web/`

---

### ⏳ Этап 8: Проверка обратной совместимости — В ОЖИДАНИИ

**Статус:** Ожидает начала

**План действий:**
1. Проверить функциональность Live UI v2
2. Проверить Analysis UI (если реализован в Live UI v2)
3. Запустить полный набор валидационных скриптов
4. Проверить работу в Docker окружении

---

### ⏳ Этап 9: Обновление Makefile и сообщений — В ОЖИДАНИИ

**Статус:** Ожидает начала

**План действий:**
1. Обновить `Makefile:35`: изменить сообщение на "Stack started. Live UI: http://localhost:3000, Backend API: http://localhost:8081"
2. Проверить другие команды Makefile на упоминания legacy UI
3. Обновить help-сообщения при необходимости

---

### ⏳ Этап 10: Финальная фиксация Live UI v2 как единственного UI — В ОЖИДАНИИ

**Статус:** Ожидает начала

**План действий:**
1. Создать или обновить документ `docs/UI_MIGRATION.md` с описанием перехода
2. Добавить в `README.md` явное указание: "UI доступен на http://localhost:3000 (Live UI v2)"
3. Обновить `LIVE_UI_ARCHITECTURE_DESIGN.md`: добавить заметку о том, что Live UI v2 является единственным UI
4. Создать changelog entry о удалении legacy UI

---

## Сводка

- **Завершено этапов:** 1 из 10
- **В процессе:** 0
- **Ожидает начала:** 9

**Текущий статус:** ✅ Этап 1 завершён, готовность к удалению подтверждена
