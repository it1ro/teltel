# План тестирования этапа 6: Проверка обратной совместимости

## Цель
Убедиться, что существующие layout'ы и функциональность работают после выделения Live UI в отдельный сервис.

## Области тестирования

### 1. Типы графиков

#### 1.1 Time Series Chart
- [ ] График отображается корректно
- [ ] Линия/area/point marks работают
- [ ] Multi-series поддержка
- [ ] Real-time обновления без мерцания
- [ ] Оси и labels отображаются корректно
- [ ] Legend работает (если включен)

#### 1.2 Scatter Chart
- [ ] График отображается корректно
- [ ] X и Y из payload корректно извлекаются
- [ ] Real-time обновления без мерцания
- [ ] Оси и labels отображаются корректно

#### 1.3 Histogram Chart
- [ ] График отображается корректно
- [ ] Bins рассчитываются автоматически
- [ ] Real-time обновления без мерцания
- [ ] Оси и labels отображаются корректно

#### 1.4 Event Timeline Chart
- [ ] График отображается корректно
- [ ] События визуализируются как маркеры
- [ ] X-ось синхронизирована с другими графиками
- [ ] Y-ось категориальная (type/channel)
- [ ] Color, Shape, Size mappings работают
- [ ] Real-time обновления без мерцания

### 2. Интерактивные функции

#### 2.1 Hover & Tooltip
- [ ] Hover на графике показывает tooltip
- [ ] Tooltip отображает корректные данные (x, y, series, event info)
- [ ] Tooltip позиционируется относительно курсора
- [ ] Tooltip скрывается при mouseleave
- [ ] Работает на всех типах графиков

#### 2.2 Time Cursor
- [ ] Клик на графике устанавливает time_cursor.value
- [ ] Drag вдоль X-оси обновляет time_cursor.value
- [ ] Визуальная линия отображается на всех графиках
- [ ] Синхронизация между графиками работает (sync_across)
- [ ] Работает на всех типах графиков

#### 2.3 Zoom & Pan
- [ ] Wheel events увеличивают/уменьшают масштаб
- [ ] Pan работает через правую кнопку мыши или Ctrl/Cmd
- [ ] Zoom/pan применяется к графикам корректно
- [ ] Нет конфликтов с time_cursor
- [ ] Работает на всех типах графиков

#### 2.4 Live Control (Play/Pause)
- [ ] Кнопки Play/Pause работают
- [ ] При play time_cursor автоматически обновляется
- [ ] При pause time_cursor зафиксирован
- [ ] При ручном изменении time_cursor автоматически ставится на pause
- [ ] Визуальный индикатор live-режима работает

#### 2.5 Time Scrubbing
- [ ] Slider отображается корректно
- [ ] Диапазон времени определяется из данных
- [ ] Scrubbing обновляет time_cursor.value
- [ ] При scrubbing автоматически ставится на pause
- [ ] При play slider следует за временем

#### 2.6 Синхронизация интерактивности
- [ ] Hover синхронизируется между графиками (если включено)
- [ ] Time cursor синхронизируется через sync_across
- [ ] Zoom/pan синхронизируются опционально
- [ ] Нет конфликтов между интерактивными слоями

### 3. Загрузка layout'ов

#### 3.1 Валидация layout
- [ ] Валидный layout загружается без ошибок
- [ ] Невалидный layout блокирует запуск UI
- [ ] Ошибки валидации понятны и локализованы

#### 3.2 Рендеринг layout
- [ ] Все регионы отображаются корректно (header, left_panel, main_panel)
- [ ] Grid layout работает согласно конфигурации
- [ ] Charts отображаются в правильных позициях
- [ ] Span для charts работает корректно

#### 3.3 Shared State
- [ ] time_cursor инициализируется из layout.shared_state
- [ ] selected_run инициализируется из layout.shared_state
- [ ] sync_across работает корректно

### 4. WebSocket переподключение

#### 4.1 Автоматическое переподключение
- [ ] При разрыве соединения происходит автоматическое переподключение
- [ ] Переподключение происходит с задержкой (reconnectDelay)
- [ ] Максимальное количество попыток ограничено (maxReconnectAttempts)
- [ ] После переподключения подписка восстанавливается

#### 4.2 Обработка ошибок
- [ ] Ошибки подключения обрабатываются корректно
- [ ] Ошибки парсинга сообщений обрабатываются корректно
- [ ] Состояние соединения обновляется корректно

#### 4.3 Graceful close
- [ ] При закрытии соединения происходит graceful close
- [ ] Таймеры переподключения очищаются
- [ ] Состояние сбрасывается корректно

### 5. Сравнение Docker vs локальный запуск

#### 5.1 Функциональность
- [ ] Все функции работают идентично в Docker и локально
- [ ] Нет различий в поведении графиков
- [ ] Нет различий в интерактивности

#### 5.2 Конфигурация
- [ ] WebSocket URL настраивается через env vars в обоих случаях
- [ ] Runtime конфигурация работает в Docker
- [ ] Dev-режим работает локально

#### 5.3 Производительность
- [ ] Нет значительных различий в производительности
- [ ] Real-time обновления работают одинаково
- [ ] Нет дополнительных задержек в Docker

## Критерии успеха

- ✅ Все типы графиков работают корректно
- ✅ Все интерактивные функции работают корректно
- ✅ Layout'ы загружаются и рендерятся корректно
- ✅ WebSocket переподключение работает корректно
- ✅ Поведение в Docker идентично локальному запуску
- ✅ Нет регрессий в функциональности
- ✅ Документация обновлена

## Результаты тестирования

### Дата: [будет заполнено]
### Тестировщик: [будет заполнено]

#### Типы графиков
- Time Series: [ ] ✅ / [ ] ❌
- Scatter: [ ] ✅ / [ ] ❌
- Histogram: [ ] ✅ / [ ] ❌
- Event Timeline: [ ] ✅ / [ ] ❌

#### Интерактивные функции
- Hover & Tooltip: [ ] ✅ / [ ] ❌
- Time Cursor: [ ] ✅ / [ ] ❌
- Zoom & Pan: [ ] ✅ / [ ] ❌
- Live Control: [ ] ✅ / [ ] ❌
- Time Scrubbing: [ ] ✅ / [ ] ❌
- Синхронизация: [ ] ✅ / [ ] ❌

#### Загрузка layout'ов
- Валидация: [ ] ✅ / [ ] ❌
- Рендеринг: [ ] ✅ / [ ] ❌
- Shared State: [ ] ✅ / [ ] ❌

#### WebSocket переподключение
- Автоматическое переподключение: [ ] ✅ / [ ] ❌
- Обработка ошибок: [ ] ✅ / [ ] ❌
- Graceful close: [ ] ✅ / [ ] ❌

#### Docker vs локальный запуск
- Функциональность: [ ] ✅ / [ ] ❌
- Конфигурация: [ ] ✅ / [ ] ❌
- Производительность: [ ] ✅ / [ ] ❌

### Найденные проблемы

[Список найденных проблем будет заполнен после тестирования]

### Выводы

[Выводы будут заполнены после тестирования]
